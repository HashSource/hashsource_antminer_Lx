void sub_28ECDC()
{
  size_t *v0; // r7
  int v1; // r4
  unsigned __int8 **v2; // r2
  unsigned __int8 *v3; // r3
  int v4; // r5
  int v5; // r8
  size_t v6; // r0
  size_t v7; // r8
  int v8; // r3
  int v9; // r2
  char *v10; // r0
  size_t v11; // r3
  int v12; // r12
  void *v13; // r0
  int v14; // r11
  int v15; // r5
  int v16; // r8
  int v17; // r8
  signed int v18; // r4
  int v19; // r0
  int v20; // r4
  int v21; // r2
  unsigned int mb_cur_max; // r0
  signed int v23; // r8
  int *v24; // r12
  int *v25; // r6
  int v26; // r9
  int v27; // r3
  int v28; // r10
  int v29; // r3
  _DWORD *v30; // r5
  int v31; // r1
  char *v32; // r0
  int v33; // r3
  int v34; // r1
  size_t v35; // r5
  __int64 v36; // r0
  void *v37; // r3
  int v38; // r1
  int v39; // r2
  int v40; // r3
  int *v41; // r8
  int v42; // r1
  int v43; // r2
  const char *v44; // r9
  int v45; // r10
  int v46; // lr
  int v47; // r1
  const char *v48; // r1
  int v49; // r8
  signed int v50; // r3
  unsigned int v51; // t0
  int v52; // r4
  int v53; // r8
  int v54; // r8
  int v55; // r5
  char *v56; // r4
  size_t v57; // r0
  int v58; // r3
  int v59; // r4
  int v60; // r3
  int v61; // r3
  int *v62; // r2
  int v63; // r5
  int v64; // r4
  int v65; // r10
  int v66; // r11
  int v67; // r1
  int v68; // r9
  int v69; // r5
  int v70; // r5
  int v71; // r3
  int v72; // r9
  bool v73; // zf
  const char *v74; // r1
  char *v75; // r0
  int v76; // r8
  int v77; // r9
  int v78; // r1
  int v79; // r2
  int v80; // r3
  int v81; // r3
  int v82; // r1
  int v83; // r0
  size_t v84; // r1
  int v85; // r3
  size_t v86; // r2
  void **v87; // r2
  size_t v88; // r1
  void *v89; // r0
  void **v90; // r2
  size_t v91; // r1
  void *v92; // r0
  _BYTE **v93; // r2
  int v94; // r3
  int v95; // r10
  _BYTE *v96; // r4
  _BYTE *v97; // r2
  size_t v98; // r4
  int v99; // r1
  int v100; // r3
  size_t v101; // r5
  __int64 v102; // r0
  void *v103; // r3
  int v104; // r1
  int v105; // r3
  size_t v106; // r9
  int v107; // r5
  __int64 v108; // r0
  size_t v109; // r3
  int v110; // r5
  __int64 v111; // r0
  int v112; // r3
  _BYTE *v113; // r4
  int v114; // r0
  bool v115; // cc
  size_t v116; // r3
  void *v117; // r0
  size_t v118; // r3
  char *v119; // r0
  char *v120; // r10
  const char *v121; // r9
  size_t v122; // r0
  signed int v123; // r3
  size_t v124; // r8
  void *v125; // r0
  size_t v126; // r3
  void *v127; // r0
  size_t v128; // r2
  void *v129; // r0
  int v130; // r3
  size_t v131; // r2
  int v132; // r9
  const unsigned __int16 **v133; // r0
  unsigned int v134; // r3
  _BYTE *v135; // r2
  char v136; // r1
  int v137; // r10
  size_t *v138; // r3
  void *v139; // r0
  int v140; // r1
  _DWORD *v141; // r9
  int v142; // r1
  int v143; // r12
  void *v144; // r0
  void *v145; // r0
  void *v146; // r0
  unsigned __int8 **v147; // r2
  size_t v148; // r3
  _DWORD *v149; // r2
  void *v150; // r0
  void **v151; // r8
  size_t v152; // r1
  void *v153; // r0
  void *v154; // r0
  void **v155; // r9
  _BYTE *v156; // r0
  bool v157; // cc
  void **v158; // r11
  size_t v159; // r1
  void *v160; // r0
  void *v161; // r0
  void **v162; // r10
  int v163; // r0
  int v164; // r3
  int v165; // r1
  _BYTE *v166; // r10
  size_t *v167; // r2
  int v168; // r6
  void *v169; // r0
  int v170; // r1
  int v171; // r0
  _DWORD *v172; // r8
  int v173; // r1
  int v174; // r12
  void *v175; // r0
  void *v176; // r0
  int v177; // r2
  void *v178; // r0
  void *v179; // r0
  int v180; // r1
  int v181; // r2
  int *v182; // r3
  int *v183; // r3
  int v184; // r8
  int v185; // r0
  _BYTE *v186; // [sp+Ch] [bp-74h]
  int v187; // [sp+Ch] [bp-74h]
  void **v188; // [sp+Ch] [bp-74h]
  void **v189; // [sp+Ch] [bp-74h]
  int v190; // [sp+14h] [bp-6Ch]
  int v191; // [sp+14h] [bp-6Ch]
  int v192; // [sp+18h] [bp-68h]
  int v193; // [sp+1Ch] [bp-64h]
  size_t v194; // [sp+1Ch] [bp-64h]
  int v195; // [sp+20h] [bp-60h]
  int v196; // [sp+24h] [bp-5Ch]
  size_t *v197; // [sp+24h] [bp-5Ch]
  size_t *v198; // [sp+24h] [bp-5Ch]
  const char *v199; // [sp+2Ch] [bp-54h]
  int v200; // [sp+34h] [bp-4Ch]
  int v201; // [sp+38h] [bp-48h]
  size_t v202; // [sp+38h] [bp-48h]
  char v203; // [sp+38h] [bp-48h]
  size_t *v204; // [sp+38h] [bp-48h]
  size_t *v205; // [sp+38h] [bp-48h]
  signed int v206; // [sp+38h] [bp-48h]
  int *v207; // [sp+40h] [bp-40h]
  wchar_t pwc; // [sp+4Ch] [bp-34h] BYREF
  mbstate_t p; // [sp+50h] [bp-30h] BYREF

  if ( !dword_48AAB8 )
    return;
  sub_290E24();
  LOWORD(v0) = 1912;
  dword_48AAA0 |= 0x800000u;
  if ( !dword_48AE3C )
    dword_48AE3C = (int)"";
  if ( dword_48AE00 )
  {
    HIWORD(v0) = 71;
  }
  else
  {
    HIWORD(v0) = 71;
    sub_28C270(0);
    v148 = v0[2];
    if ( *(_DWORD *)v148 )
      **(_BYTE **)v148 = 0;
    v149 = *(_DWORD **)(v148 + 4);
    dword_48AE2C = 0;
    dword_48AE04 = 0;
    dword_48AE34 = 0;
    dword_48AE30 = 0;
    if ( v149 )
    {
      v149[1] = 0;
      *v149 = 0;
    }
    dword_48AE38 = 0;
  }
  v1 = dword_48AB08;
  v2 = (unsigned __int8 **)v0[1];
  dword_48AEF8 = -1;
  dword_48AEFC = dword_48AE24 - dword_48AE10;
  v3 = *v2;
  dword_48AEF4 = 0;
  v186 = v3;
  if ( dword_48AB08 )
  {
    v4 = sub_297918(dword_48AE10);
    if ( v4 && (v4 = dword_48B6E0) != 0 )
    {
      v147 = (unsigned __int8 **)v0[1];
      v4 = 1;
      dword_48AEF4 = 1;
      v186[1] = 0;
      v1 = 1;
      *v186 = 42;
      v3 = *v147;
    }
    else
    {
      v1 = v4;
      v3 = *(unsigned __int8 **)v0[1];
    }
  }
  else
  {
    v4 = 0;
  }
  v5 = dword_48AE3C;
  if ( **(unsigned __int8 **)v0[2] != *v3 )
    dword_48AEF0 = 0;
  if ( dword_48AE3C == dword_48AAA4 || dword_48AE0C )
  {
    if ( dword_48AE18 && dword_48AE40 )
    {
      v6 = strlen((const char *)dword_48AE18);
      sub_294504(dword_48AE18, v6);
    }
    v7 = dword_48AE08;
    if ( dword_48AE08 > 0 )
    {
      v8 = dword_48AE08 + v1;
      v9 = dword_48AE08 + v1 + 2;
      if ( (int)*v0 <= v9 )
      {
        v151 = (void **)v0[2];
        v152 = v8 + 1026 - (v9 & 0x3FF);
        v153 = *v151;
        *v0 = v152;
        v154 = sub_93050(v153, v152);
        v155 = (void **)v0[1];
        *v151 = v154;
        v156 = sub_93050(*v155, *v0);
        v7 = dword_48AE08;
        v186 = v156;
        *v155 = v156;
        v8 = v1 + v7;
      }
      v1 = v8;
      v10 = &v186[v4];
      v4 = v8;
      strncpy(v10, (const char *)dword_48AE0C, v7);
    }
    v186[v4] = 0;
    dword_48AE14 = v7 - dword_48AE24;
  }
  else
  {
    v119 = strrchr((const char *)dword_48AE3C, 10);
    v120 = v119;
    if ( v119 )
    {
      v121 = v119 + 1;
      if ( dword_48AE40 )
      {
        sub_294504(v5, (size_t)&v121[-v5]);
        if ( (int)&v121[-v5] <= 1 || *(v120 - 1) != 13 )
        {
          if ( dword_490140 )
          {
            tputs((const char *)dword_490140, 1, (int (*)(int))sub_293B80);
            dword_48AE04 = 0;
          }
        }
      }
    }
    else
    {
      v121 = (const char *)v5;
    }
    v122 = strlen(v121);
    v123 = *v0;
    v1 += v122;
    v124 = v122;
    dword_48AE10 = v122;
    if ( v123 <= v1 + 2 )
    {
      v158 = (void **)v0[2];
      v159 = v1 + 1026 - (((_WORD)v1 + 2) & 0x3FF);
      v160 = *v158;
      *v0 = v159;
      v161 = sub_93050(v160, v159);
      v162 = (void **)v0[1];
      *v158 = v161;
      v186 = sub_93050(*v162, *v0);
      *v162 = v186;
    }
    strncpy(&v186[v4], v121, v124);
    v186[v1] = 0;
    dword_48AE14 = 0;
    dword_48AE1C = 0;
  }
  v11 = v0[1];
  v12 = dword_48AEF4;
  v13 = *(void **)(v11 + 12);
  v14 = 0;
  **(_DWORD **)(v11 + 4) = 0;
  v15 = dword_48AE10 + v12;
  memset(v13, 0, 4 * *(_DWORD *)(v11 + 16));
  v16 = dword_490144;
  v190 = 0;
  v193 = sub_347690(v15);
  v192 = v1;
LABEL_22:
  if ( v15 >= v16 )
  {
    while ( 1 )
    {
      ++v14;
      if ( _ctype_get_mb_cur_max() <= 1 || dword_48BB60 || dword_48AEFC <= 0 )
      {
        v18 = dword_490144 * v14;
      }
      else
      {
        v17 = dword_48AE08;
        if ( v190 >= dword_48AE08 )
        {
          v18 = v190;
          v195 = v190;
        }
        else
        {
          v18 = v190;
          do
          {
            v19 = sub_28C428((const void *)dword_48AE0C, v190, v18, 1);
            if ( dword_490144 < v19 )
            {
              v195 = v190;
              v18 = sub_29B610(dword_48AE0C, v18, 0);
              v190 = v18;
              goto LABEL_33;
            }
            if ( dword_490144 == v19 )
              break;
            ++v18;
          }
          while ( v17 != v18 );
          v130 = v190;
          v190 = v18;
          v195 = v130;
        }
      }
LABEL_33:
      if ( !dword_48AE18 )
        break;
      if ( v14 == 1 )
        goto LABEL_35;
LABEL_36:
      *(_DWORD *)(*(_DWORD *)(v0[1] + 4) + 4 * v14) = v18;
      if ( _ctype_get_mb_cur_max() > 1 && !dword_48BB60 && dword_48AEFC > 0 )
      {
        v114 = sub_28C428((const void *)dword_48AE0C, v195, v190, 1);
        v16 = dword_490144;
        v15 -= v114;
        goto LABEL_22;
      }
      v15 -= dword_490144;
      if ( v15 < dword_490144 )
        goto LABEL_40;
    }
    if ( v14 == 1 || v193 != v14 - 1 )
    {
      v18 += dword_48AE1C;
      goto LABEL_36;
    }
LABEL_35:
    v18 += dword_48AE14;
    goto LABEL_36;
  }
LABEL_40:
  v20 = v192;
  dword_48AE44 = v14;
  if ( _ctype_get_mb_cur_max() <= 1 )
  {
    v194 = 1;
    v21 = dword_4900DC;
  }
  else
  {
    v21 = dword_4900DC;
    if ( dword_48BB60 )
    {
      v194 = 1;
    }
    else
    {
      p.__count = 0;
      p.__wch = 0;
      v194 = mbrtowc(&pwc, (const char *)dword_48AAD4, dword_4900DC, &p);
      v21 = dword_4900DC;
    }
  }
  mb_cur_max = (unsigned __int16)&dword_48AAD4;
  v196 = 0;
  v23 = 0;
  v199 = 0;
  v24 = &dword_48BB60;
  v25 = &dword_48AAD4;
LABEL_45:
  if ( v23 < v21 )
  {
    do
    {
      v26 = *(unsigned __int8 *)(*v25 + v23);
      mb_cur_max = _ctype_get_mb_cur_max();
      if ( mb_cur_max > 1 && !dword_48BB60 )
      {
        if ( v194 >= 0xFFFFFFFE )
        {
          p.__count = dword_48BB60;
          v200 = 1;
          p.__wch = 0;
          v194 = 1;
        }
        else
        {
          if ( !v194 )
            break;
          v27 = wcwidth(pwc);
          if ( v27 < 0 )
            v27 = 1;
          v200 = v27;
        }
      }
      if ( v20 + 8 >= (int)*v0 )
      {
        v87 = (void **)v0[2];
        v88 = 2 * *v0;
        *v0 = v88;
        v188 = v87;
        v89 = sub_93050(*v87, v88);
        v90 = v188;
        v91 = *v0;
        v189 = (void **)v0[1];
        *v90 = v89;
        v92 = sub_93050(*v189, v91);
        v93 = (_BYTE **)v0[1];
        *v189 = v92;
        v186 = *v93;
      }
      if ( dword_4900D8 == v23 )
      {
        v199 = (const char *)v14;
        dword_48AEF8 = v20;
      }
      if ( (unsigned int)(v26 - 128) > 0x7F || dword_48AB04 )
      {
        if ( v26 == 9 )
        {
          v94 = v15 & 7;
          if ( v15 <= 0 )
            v94 = -(-v15 & 7);
          v95 = v20 + 8 - v94;
          if ( v15 + 8 - v94 < dword_490144 )
          {
            if ( v20 >= v95 )
            {
              v15 += 8 - v94;
              goto LABEL_78;
            }
            v96 = &v186[v20 - 1];
            do
              *++v96 = 32;
            while ( &v186[v95 - 1] != v96 );
            v15 += 8 - v94;
            goto LABEL_179;
          }
          v109 = v0[1];
          v110 = dword_490144 - v15;
          v111 = *(_QWORD *)(v109 + 4);
          if ( HIDWORD(v111) - 2 <= v14 )
          {
            v202 = v0[1];
            *(_DWORD *)(v109 + 8) = 2 * HIDWORD(v111);
            LODWORD(v111) = sub_93050((void *)v111, 8 * HIDWORD(v111));
            v131 = v0[1];
            *(_DWORD *)(v202 + 4) = v111;
            LODWORD(v111) = *(_DWORD *)(v131 + 4);
          }
          v112 = v20 + v110;
          ++v14;
          v15 = v95 - v20 - v110;
          *(_DWORD *)(v111 + 4 * v14) = v112;
          if ( v20 < v95 )
          {
            v113 = &v186[v20 - 1];
            do
              *++v113 = 32;
            while ( &v186[v95 - 1] != v113 );
LABEL_179:
            v20 = v95;
          }
        }
        else if ( v26 == 10 )
        {
          v28 = v20 + 1;
          v97 = &v186[v20];
          if ( dword_48AAF8 || !dword_490138 || !*(_BYTE *)dword_490138 )
            goto LABEL_189;
          v98 = v0[1];
          *v97 = 0;
          v99 = *(_DWORD *)(v98 + 8);
          if ( v99 - 2 <= v14 )
          {
            v179 = *(void **)(v98 + 4);
            *(_DWORD *)(v98 + 8) = 2 * v99;
            *(_DWORD *)(v98 + 4) = sub_93050(v179, 8 * v99);
            v98 = v0[1];
          }
          v100 = *(_DWORD *)(v98 + 4);
          ++v14;
          v20 = v28;
          v15 = 0;
          *(_DWORD *)(v100 + 4 * v14) = v28;
        }
        else
        {
          if ( v26 <= 31 )
          {
            if ( (v26 & 0x80) == 0 )
            {
              v28 = v20 + 1;
              v97 = &v186[v20];
LABEL_189:
              *v97 = 94;
              if ( dword_490144 > v15 + 1 )
              {
                v15 += 2;
                goto LABEL_70;
              }
LABEL_65:
              v30 = (_DWORD *)v0[1];
              v31 = v30[2];
              if ( v31 - 2 <= v14 )
              {
                v129 = (void *)v30[1];
                v30[2] = 2 * v31;
                v30[1] = sub_93050(v129, 8 * v31);
                v30 = (_DWORD *)v0[1];
              }
              ++v14;
              v32 = (char *)v30[3];
              v33 = 4 * v14;
              *(_DWORD *)(v30[1] + 4 * v14) = v28;
              v34 = v30[4];
              if ( v34 - 1 <= v14 )
              {
                v30[4] = 2 * v34;
                v127 = sub_93050(v32, 8 * v34);
                v128 = v0[1];
                v30[3] = v127;
                v33 = 4 * v14;
                v32 = *(char **)(v128 + 12);
              }
              v15 = 1;
              *(_DWORD *)&v32[v33] = v196;
              if ( v26 <= 31 )
              {
LABEL_70:
                if ( (v26 & 0x80u) == 0 )
                {
                  v29 = (unsigned __int8)v26 | 0x40;
                  if ( (v26 | 0x40) == v29 )
                  {
                    v132 = (unsigned __int8)v26 | 0x40;
                    v203 = v29;
                    v133 = _ctype_b_loc();
                    LOBYTE(v29) = v203;
                    if ( ((*v133)[v132] & 0x200) != 0 )
                      LOBYTE(v29) = (*_ctype_toupper_loc())[v132];
                  }
                  goto LABEL_72;
                }
              }
              LOBYTE(v29) = 63;
LABEL_72:
              v20 += 2;
              v186[v28] = v29;
              if ( dword_490144 <= v15 )
              {
                v35 = v0[1];
                v36 = *(_QWORD *)(v35 + 4);
                if ( HIDWORD(v36) - 2 <= v14 )
                {
                  *(_DWORD *)(v35 + 8) = 2 * HIDWORD(v36);
                  *(_DWORD *)(v35 + 4) = sub_93050((void *)v36, 8 * HIDWORD(v36));
                  v35 = v0[1];
                  LODWORD(v36) = *(_DWORD *)(v35 + 4);
                }
                ++v14;
                v37 = *(void **)(v35 + 12);
                *(_DWORD *)(v36 + 4 * v14) = v20;
                v38 = *(_DWORD *)(v35 + 16);
                if ( v38 - 1 <= v14 )
                {
                  *(_DWORD *)(v35 + 16) = 2 * v38;
                  v125 = sub_93050(v37, 8 * v38);
                  v126 = v0[1];
                  *(_DWORD *)(v35 + 12) = v125;
                  v37 = *(void **)(v126 + 12);
                }
                v15 = 0;
                *((_DWORD *)v37 + v14) = v196;
              }
              goto LABEL_78;
            }
          }
          else if ( v26 == 127 )
          {
            v28 = v20 + 1;
            v186[v20] = 94;
            if ( dword_490144 <= v15 + 1 )
              goto LABEL_65;
            v15 += 2;
            LOBYTE(v29) = 63;
            goto LABEL_72;
          }
          v201 = v20;
          if ( _ctype_get_mb_cur_max() <= 1 || dword_48BB60 )
          {
            ++v15;
            ++v20;
            v186[v201] = v26;
            if ( dword_490144 <= v15 )
            {
              v101 = v0[1];
              v102 = *(_QWORD *)(v101 + 4);
              if ( HIDWORD(v102) - 2 <= v14 )
              {
                *(_DWORD *)(v101 + 8) = 2 * HIDWORD(v102);
                *(_DWORD *)(v101 + 4) = sub_93050((void *)v102, 8 * HIDWORD(v102));
                v101 = v0[1];
                LODWORD(v102) = *(_DWORD *)(v101 + 4);
              }
              ++v14;
              v103 = *(void **)(v101 + 12);
              *(_DWORD *)(v102 + 4 * v14) = v20;
              v104 = *(_DWORD *)(v101 + 16);
              if ( v104 - 1 <= v14 )
              {
                *(_DWORD *)(v101 + 16) = 2 * v104;
                v117 = sub_93050(v103, 8 * v104);
                v118 = v0[1];
                *(_DWORD *)(v101 + 12) = v117;
                v103 = *(void **)(v118 + 12);
              }
              v15 = 0;
              *((_DWORD *)v103 + v14) = v196;
            }
          }
          else
          {
            if ( v15 + v200 <= dword_490144 || dword_490144 <= v15 )
            {
              v196 = dword_48BB60;
            }
            else
            {
              v207 = v25;
              v165 = v15;
              v206 = v23;
              v166 = &v186[v20 - 1];
              v167 = v0;
              v168 = dword_48BB60;
              do
              {
                *++v166 = 32;
                ++v165;
                v171 = dword_490144;
                ++v20;
                ++v168;
                if ( dword_490144 <= v165 )
                {
                  v172 = (_DWORD *)v167[1];
                  v173 = v172[2];
                  v174 = v172[1];
                  v115 = v173 - 2 <= v14++;
                  if ( v115 )
                  {
                    v175 = (void *)v172[1];
                    v197 = v167;
                    v172[2] = 2 * v173;
                    v176 = sub_93050(v175, 8 * v173);
                    v167 = v197;
                    v172[1] = v176;
                    v172 = (_DWORD *)v197[1];
                    v174 = v172[1];
                  }
                  v169 = (void *)v172[3];
                  *(_DWORD *)(v174 + 4 * v14) = v20;
                  v170 = v172[4];
                  if ( v170 - 1 <= v14 )
                  {
                    v198 = v167;
                    v172[4] = 2 * v170;
                    v178 = sub_93050(v169, 8 * v170);
                    v167 = v198;
                    v172[3] = v178;
                    v169 = *(void **)(v198[1] + 12);
                  }
                  *((_DWORD *)v169 + v14) = v168;
                  v165 = 0;
                  v171 = dword_490144;
                }
              }
              while ( v168 + v15 < v171 );
              v196 = v168;
              v0 = v167;
              v23 = v206;
              v15 = v165;
              v25 = v207;
            }
            if ( v23 == dword_4900D8 )
            {
              v199 = (const char *)v14;
              dword_48AEF8 = v20;
            }
            if ( v23 < v23 + v194 )
            {
              v134 = v23;
              v135 = &v186[v20 - 1];
              do
              {
                ++v20;
                v136 = *(_BYTE *)(*v25 + v134++);
                *++v135 = v136;
              }
              while ( v134 < v23 + v194 );
            }
            if ( v200 )
            {
              v137 = 0;
              v138 = v0;
              do
              {
                ++v15;
                ++v137;
                if ( dword_490144 <= v15 )
                {
                  v141 = (_DWORD *)v138[1];
                  v15 = 0;
                  v142 = v141[2];
                  v143 = v141[1];
                  v115 = v142 - 2 <= v14++;
                  if ( v115 )
                  {
                    v144 = (void *)v141[1];
                    v204 = v138;
                    v141[2] = 2 * v142;
                    v145 = sub_93050(v144, 8 * v142);
                    v138 = v204;
                    v141[1] = v145;
                    v141 = (_DWORD *)v204[1];
                    v143 = v141[1];
                  }
                  v139 = (void *)v141[3];
                  *(_DWORD *)(v143 + 4 * v14) = v20;
                  v140 = v141[4];
                  if ( v140 - 1 <= v14 )
                  {
                    v205 = v138;
                    v141[4] = 2 * v140;
                    v146 = sub_93050(v139, 8 * v140);
                    v138 = v205;
                    v141[3] = v146;
                    v139 = *(void **)(v205[1] + 12);
                  }
                  *((_DWORD *)v139 + v14) = v196;
                }
              }
              while ( v200 != v137 );
              v0 = v138;
            }
          }
        }
      }
      else
      {
        sprintf(&v186[v20], "\\%o", v26);
        v105 = v15 + 4;
        if ( v15 + 4 >= dword_490144 )
        {
          v106 = v0[1];
          v107 = dword_490144 - v15;
          v108 = *(_QWORD *)(v106 + 4);
          if ( HIDWORD(v108) - 2 <= v14 )
          {
            *(_DWORD *)(v106 + 8) = 2 * HIDWORD(v108);
            LODWORD(v108) = sub_93050((void *)v108, 8 * HIDWORD(v108));
            v116 = v0[1];
            *(_DWORD *)(v106 + 4) = v108;
            LODWORD(v108) = *(_DWORD *)(v116 + 4);
          }
          v105 = 4 - v107;
          ++v14;
          *(_DWORD *)(v108 + 4 * v14) = v20 + v107;
        }
        v20 += 4;
        v15 = v105;
      }
LABEL_78:
      mb_cur_max = _ctype_get_mb_cur_max();
      if ( mb_cur_max <= 1 )
      {
        v39 = dword_4900DC;
      }
      else
      {
        v39 = dword_4900DC;
        if ( !dword_48BB60 )
        {
          v23 += v194;
          mb_cur_max = mbrtowc(&pwc, (const char *)(*v25 + v23), dword_4900DC - v23, &p);
          v194 = mb_cur_max;
          v21 = dword_4900DC;
          goto LABEL_45;
        }
      }
      ++v23;
    }
    while ( v23 < v39 );
  }
  v40 = dword_48AEF8;
  v186[v20] = 0;
  if ( v40 < 0 )
  {
    v199 = (const char *)v14;
    dword_48AEF8 = v20;
  }
  v41 = (int *)v0[1];
  v42 = v41[2];
  v43 = v41[1];
  if ( v42 - 2 <= v14 )
  {
    v150 = (void *)v41[1];
    v41[2] = 2 * v42;
    mb_cur_max = (unsigned int)sub_93050(v150, 8 * v42);
    v41[1] = mb_cur_max;
    v41 = (int *)v0[1];
    v43 = v41[1];
  }
  *(_DWORD *)(v43 + 4 * (v14 + 1)) = v20;
  if ( dword_48AAF8 || !dword_490138 || !*(_BYTE *)dword_490138 )
  {
    v65 = dword_48AE14;
    v66 = dword_48AE30;
    dword_48AE2C = 0;
    v191 = dword_48AE14 + dword_48AE24;
    if ( dword_48AE30 )
      v67 = dword_48AEF8 - dword_48AE30;
    else
      v67 = dword_48AEF8 - dword_48AE14;
    v68 = dword_490144;
    v69 = dword_490144 / 3;
    if ( dword_490144 - 1 > v67 )
    {
      if ( dword_490144 - 2 > dword_48AEF8 - dword_48AE14 )
        goto LABEL_236;
      if ( v67 <= 0 )
      {
        v70 = v69 * sub_347690(dword_48AEF8 - 1);
        if ( v65 )
        {
          v115 = v70 <= 0;
          if ( v70 > 0 )
            v115 = v191 <= v70;
          if ( !v115 )
            v70 = v191;
        }
      }
      else
      {
        v70 = dword_48AE30;
      }
    }
    else
    {
      v70 = dword_48AEF8 - 2 * v69;
      if ( v70 < 0 )
        goto LABEL_236;
      if ( dword_48AE14 )
      {
        v157 = v70 <= 0;
        if ( v70 > 0 )
          v157 = dword_48AE14 + dword_48AE24 <= v70;
        if ( !v157 )
        {
          v70 = dword_48AE14 + dword_48AE24;
          goto LABEL_148;
        }
      }
    }
    if ( v70 > 0 )
    {
LABEL_148:
      v71 = v70;
      v65 = 0;
      v186[v70] = 60;
      v68 = dword_490144;
      goto LABEL_149;
    }
    if ( v70 )
    {
      v71 = v70;
      v65 = 0;
      goto LABEL_149;
    }
LABEL_236:
    v71 = v65;
    v70 = 0;
LABEL_149:
    v72 = v68 + v71;
    if ( v20 > v72 )
      v186[v72 - 1] = 62;
    if ( dword_48AEF0 )
    {
      v73 = v70 == v66;
      if ( v70 == v66 )
        v73 = dword_48AE40 == 0;
      if ( v73 )
        goto LABEL_166;
    }
    v74 = (const char *)(*v41 + v70);
    v75 = (char *)(*(_DWORD *)v0[2] + v66);
    dword_48AE40 = 0;
    dword_48AE48 = 0;
    v76 = dword_48AE04;
    sub_28D71C(v75, v74, 0, dword_490144 + dword_48AE38, dword_490144 + v65, 0);
    if ( _ctype_get_mb_cur_max() > 1 )
    {
      v77 = dword_48AE04;
      if ( !dword_48BB60 && !dword_48AE48 && dword_48AE04 != v76 && dword_48AE14 < dword_48AE04 && dword_48AE20 > v76 )
      {
        v77 = dword_48AE04 - dword_48AE1C;
        dword_48AE04 -= dword_48AE1C;
      }
    }
    else
    {
      v77 = dword_48AE04;
    }
    v78 = dword_490144;
    if ( v70 )
    {
      v80 = v20 - v70;
      if ( dword_48AE38 >= 0 || v20 != v77 || dword_48AF00 <= v20 )
        goto LABEL_257;
      v177 = v77;
      v77 = v20 - v70;
    }
    else
    {
      v79 = dword_48AE14;
      if ( dword_48AE14 <= dword_48AE38 || v20 != v77 )
        goto LABEL_162;
      v177 = v77 - dword_48AE14;
      if ( dword_48AF00 <= v77 - dword_48AE14 )
      {
LABEL_298:
        v79 = dword_48AE14;
        v20 = v77;
LABEL_162:
        v80 = v20;
LABEL_163:
        v81 = v80 - v79;
        if ( v81 >= v78 )
          v81 = v78;
        v82 = *(_DWORD *)v0[1];
        dword_48AF00 = v81;
        sub_28CCC8(dword_48AEF8 - v70, (char *)(v82 + v70));
        dword_48AE30 = v70;
        goto LABEL_166;
      }
    }
    sub_28D6E8(dword_490144 - v177);
    v78 = dword_490144;
    if ( !v70 )
      goto LABEL_298;
    v80 = v77;
LABEL_257:
    v79 = 0;
    goto LABEL_163;
  }
  if ( dword_48AEF0 && !dword_48AE40 )
    goto LABEL_166;
  dword_48AE40 = 0;
  if ( v20 < dword_490130 )
    goto LABEL_90;
  mb_cur_max = _ctype_get_mb_cur_max();
  if ( mb_cur_max <= 1 )
  {
    v180 = dword_490130;
  }
  else
  {
    v180 = dword_490130;
    if ( !dword_48BB60 )
    {
      mb_cur_max = sub_29B610(v186, dword_490130, 0);
      v41 = (int *)v0[1];
      v20 = mb_cur_max;
      v43 = v41[1];
      goto LABEL_90;
    }
  }
  v43 = v41[1];
  v20 = v180 - 1;
LABEL_90:
  v44 = 0;
  v45 = 4;
  v187 = v20;
  while ( 1 )
  {
    v46 = *(_DWORD *)(v43 + 4 * (_DWORD)v44);
    v47 = *v41;
    if ( dword_48AE34 >= (int)v44 )
      mb_cur_max = v0[2];
    dword_48AE48 = 0;
    v48 = (const char *)(v47 + v46);
    v49 = dword_48AE04;
    if ( dword_48AE34 >= (int)v44 )
    {
      v51 = mb_cur_max;
      mb_cur_max = *(_DWORD *)mb_cur_max;
      v50 = *(_DWORD *)(v51 + 4);
    }
    else
    {
      v50 = 0;
    }
    if ( dword_48AE34 >= (int)v44 )
    {
      v24 = *(int **)(v50 + 4 * (_DWORD)v44);
      v50 = *(_DWORD *)(v50 + v45);
    }
    else
    {
      mb_cur_max = (unsigned int)"";
    }
    if ( dword_48AE34 >= (int)v44 )
    {
      mb_cur_max += (unsigned int)v24;
      v50 -= (int)v24;
    }
    mb_cur_max = sub_28D71C((char *)mb_cur_max, v48, v44, v50, *(_DWORD *)(v43 + v45) - v46, v14);
    if ( !v44 )
    {
      mb_cur_max = _ctype_get_mb_cur_max();
      if ( mb_cur_max > 1
        && !dword_48BB60
        && !dword_48AE48
        && dword_48AE04 != v49
        && dword_48AE04 > dword_48AE14
        && dword_48AE20 > v49 )
      {
        dword_48AE04 -= dword_48AE1C;
        if ( v14 )
          goto LABEL_345;
LABEL_112:
        v53 = dword_48AE14;
        if ( v187 == dword_48AE04 && dword_48AE38 < dword_48AE14 && v187 < dword_48AF00 )
        {
          if ( _ctype_get_mb_cur_max() <= 1 )
          {
            v163 = dword_48AE04;
            v164 = dword_490144;
LABEL_284:
            v164 += v53;
          }
          else
          {
            v163 = dword_48AE04;
            v164 = dword_490144;
            if ( dword_48BB60 )
              goto LABEL_284;
          }
          mb_cur_max = v164 - v163;
          if ( mb_cur_max )
          {
            mb_cur_max = sub_28D6E8(mb_cur_max);
            v53 = dword_48AE14;
          }
        }
LABEL_113:
        v54 = v187 - v53;
LABEL_114:
        dword_48AF00 = v54;
        goto LABEL_115;
      }
      if ( dword_48AE44 )
      {
        if ( !v14 )
          goto LABEL_112;
LABEL_345:
        v54 = *(_DWORD *)(*(_DWORD *)(v0[1] + 4) + 4);
        goto LABEL_114;
      }
      if ( dword_48AE10 > dword_490144 )
      {
        mb_cur_max = _ctype_get_mb_cur_max();
        v52 = v14;
        if ( mb_cur_max > 1 )
        {
LABEL_106:
          if ( !dword_48BB60 && !dword_48AE48 && dword_48AE04 != v49 )
          {
            mb_cur_max = dword_48AE1C;
            v24 = (int *)dword_490144;
            if ( dword_48AE04 > dword_48AE20 - dword_490144 - dword_48AE1C )
              dword_48AE04 -= dword_48AE14 - dword_48AE1C;
          }
        }
      }
      else
      {
        v52 = v14;
      }
      if ( !v52 )
        goto LABEL_112;
      goto LABEL_351;
    }
    if ( (const char *)dword_48AE44 != v44 )
      goto LABEL_115;
    v52 = v14 | (unsigned int)v44;
    if ( dword_48AE10 <= dword_490144 )
      goto LABEL_115;
    mb_cur_max = _ctype_get_mb_cur_max();
    if ( mb_cur_max > 1 )
      goto LABEL_106;
LABEL_351:
    if ( !v44 )
    {
      if ( !v14 )
      {
        v53 = dword_48AE14;
        goto LABEL_113;
      }
      goto LABEL_345;
    }
LABEL_115:
    ++v44;
    v45 += 4;
    if ( v44 == (const char *)(v14 + 1) )
      break;
    v41 = (int *)v0[1];
    v43 = v41[1];
  }
  if ( dword_48AE34 > v14 && dword_48AE34 >= (int)v44 )
  {
    v55 = 4 * (v14 + 1);
    do
    {
      v56 = (char *)(*(_DWORD *)v0[2] + *(_DWORD *)(*(_DWORD *)(v0[2] + 4) + v55));
      sub_28D00C(v44);
      sub_28CCC8(0, v56);
      if ( (const char *)dword_48AE34 == v44 )
        v57 = strlen(v56);
      else
        v57 = dword_490144;
      sub_28D6E8(v57);
      ++v44;
      v55 += 4;
    }
    while ( dword_48AE34 >= (int)v44 );
  }
  dword_48AE34 = v14;
  if ( (const char *)dword_48AE2C == v199 || (sub_28D00C(v199), _ctype_get_mb_cur_max() != 1) && !dword_48BB60 )
  {
    if ( v199 )
      goto LABEL_302;
    v58 = dword_48AE14;
    v59 = dword_48AE14 + dword_48AE24;
LABEL_129:
    if ( v58 > 0 )
    {
      v61 = dword_48AE04;
      if ( dword_48AE04 <= 0
        || (_ctype_get_mb_cur_max() <= 1 || dword_48BB60 ? (v181 = dword_48AE20 + 1) : (v181 = dword_48AE10),
            (v61 = dword_48AE04, dword_48AE04 >= v181) || !dword_48AE0C) )
      {
        v62 = *(int **)(v0[1] + 4);
        v63 = *v62;
        v64 = dword_48AEF8 - *v62;
LABEL_133:
        if ( v64 < v61 )
        {
          v184 = _ctype_get_mb_cur_max() <= 1 || dword_48BB60
               ? v64
               : sub_28C428((const void *)(*(_DWORD *)v0[2] + v63), 0, v64, 1) - dword_48AE38;
          if ( v184 >= 0 && dword_48AE04 > v184 )
          {
            sub_29451C(dword_48AE04 - v184);
            dword_48AE04 = v184;
          }
        }
        goto LABEL_134;
      }
      if ( dword_490140 )
        tputs((const char *)dword_490140, 1, (int (*)(int))sub_293B80);
      if ( dword_48AEF4 )
        sub_294504((int)"*", 1u);
      sub_294504(dword_48AE0C, v59);
      if ( _ctype_get_mb_cur_max() <= 1 || dword_48BB60 )
      {
        v60 = dword_48AE14;
        dword_48AE04 = dword_48AEF4 + v59;
      }
      else
      {
        v185 = sub_28C428((const void *)dword_48AE0C, 0, v59, 1);
        v60 = dword_48AE14;
        dword_48AE04 = v185 - dword_48AE14 + dword_48AEF4;
      }
    }
    else
    {
      v60 = dword_48AE14;
    }
    v73 = v60 == 0;
    v182 = *(int **)(v0[1] + 4);
    v63 = *v182;
    v64 = dword_48AEF8 - *v182;
    if ( v73 )
      goto LABEL_134;
    v61 = dword_48AE04;
    goto LABEL_133;
  }
  if ( v199 )
  {
LABEL_302:
    v63 = *(_DWORD *)(*(_DWORD *)(v0[1] + 4) + 4 * (_DWORD)v199);
    v64 = dword_48AEF8 - v63;
    goto LABEL_134;
  }
  v58 = dword_48AE14;
  if ( dword_48AE14 )
  {
    v59 = dword_48AE14 + dword_48AE24;
    dword_48AE04 += dword_48AE14;
    goto LABEL_129;
  }
  v183 = *(int **)(v0[1] + 4);
  v63 = *v183;
  v64 = dword_48AEF8 - *v183;
LABEL_134:
  if ( _ctype_get_mb_cur_max() > 1 && !dword_48BB60 || dword_48AE04 != v64 )
    sub_28CCC8(v64, (char *)(*(_DWORD *)v0[1] + v63));
LABEL_166:
  v83 = fflush((FILE *)dword_48AAB0);
  v84 = v0[2];
  v85 = 0;
  dword_48AEF0 = 0;
  v73 = dword_48AAF8 == 0;
  v86 = v0[1];
  v0[1] = v84;
  v0[2] = v86;
  if ( v73 || !dword_48AE30 )
    v85 = dword_48AE14;
  dword_48AE38 = v85;
  dword_48AAA0 &= ~0x800000u;
  sub_290E74(v83);
}
