int __fastcall sub_57878(int a1)
{
  double v1; // d0
  int v2; // r4
  double v3; // d15
  double v4; // d12
  double v5; // d13
  double v6; // d7
  double v7; // d9
  double v8; // d14
  double v9; // d8
  double v10; // d3
  double v11; // d10
  double v12; // d2
  double v13; // d4
  double v14; // d0
  double v15; // d11
  double v16; // d1
  int v17; // r12
  double v18; // d7
  int v19; // r1
  int v20; // kr00_4
  double v21; // d9
  double v22; // d5
  double v23; // d15
  double v24; // d12
  double *v25; // r6
  double v26; // d5
  double *v27; // r1
  int v28; // r11
  double v29; // d4
  double v30; // d8
  double v31; // d6
  double v32; // d12
  double v33; // d5
  double v34; // d9
  double v35; // d7
  double v36; // d6
  int v37; // r1
  double v38; // d7
  int v39; // kr04_4
  double v40; // d4
  int v41; // kr08_4
  int v42; // r11
  double *v43; // r6
  double v44; // d3
  int v45; // r10
  double v46; // d1
  double v47; // d6
  int v48; // r2
  double v49; // d2
  double v50; // d3
  int v51; // r10
  double v52; // d6
  double v53; // d0
  double v54; // d7
  double v55; // r0
  double v56; // d3
  int v57; // r5
  double v58; // d6
  double v59; // d0
  double v60; // d8
  int v61; // r6
  double v62; // d0
  double *v63; // r11
  int v64; // r3
  double v65; // d3
  double v66; // r0
  double v67; // d2
  double *v68; // lr
  double v69; // d1
  double v70; // d5
  double *v71; // r10
  double v72; // d6
  double v73; // d3
  double v74; // d7
  double v75; // d1
  int v76; // r6
  double v77; // d0
  double v78; // d6
  double v79; // d5
  double v80; // d8
  int v81; // r1
  int v82; // r12
  int v83; // r6
  int v84; // r3
  double v85; // r0
  int v86; // r6
  int v87; // r3
  int v88; // r2
  double *v89; // r2
  double v90; // d7
  int v91; // r3
  double v92; // d7
  int v93; // r3
  double v94; // d5
  double *v95; // r3
  double v96; // r0
  double v97; // d7
  bool v98; // cc
  int v99; // r12
  double v100; // d7
  double v101; // d0
  int v102; // r0
  _BYTE *v103; // r6
  int v104; // r4
  double *v105; // r7
  int v106; // r5
  double v107; // d7
  int v108; // r2
  int v109; // r3
  double v110; // d6
  int v111; // r2
  int v112; // r3
  bool v113; // zf
  int v114; // r3
  double v115; // d0
  double v116; // d7
  double v117; // d0
  double v118; // d8
  double v119; // r0
  double v120; // r0
  double v121; // d0
  int v122; // r10
  int v123; // r12
  __int64 v124; // r8
  int v125; // r0
  int v126; // r1
  int v127; // r1
  int v128; // r2
  int v129; // lr
  int v130; // r12
  _DWORD *v131; // r3
  int v132; // r0
  double v133; // d7
  double v134; // d5
  double v135; // d6
  double v136; // d7
  double v137; // d0
  double v138; // d8
  double v139; // d6
  int v140; // r2
  double v141; // d7
  double v142; // d0
  double v143; // d0
  double v144; // d9
  double *v145; // r8
  double v146; // r0
  double v147; // d8
  int v148; // r3
  int v149; // r3
  double v150; // d0
  double v152; // [sp+30h] [bp-104h]
  int v153; // [sp+30h] [bp-104h]
  double v154; // [sp+38h] [bp-FCh]
  int v155; // [sp+38h] [bp-FCh]
  double v156; // [sp+40h] [bp-F4h]
  double *v157; // [sp+40h] [bp-F4h]
  int v158; // [sp+40h] [bp-F4h]
  double v159; // [sp+48h] [bp-ECh]
  int v160; // [sp+48h] [bp-ECh]
  double v161; // [sp+50h] [bp-E4h]
  double v162; // [sp+58h] [bp-DCh]
  double v163; // [sp+60h] [bp-D4h]
  double v164; // [sp+68h] [bp-CCh]
  double v165; // [sp+70h] [bp-C4h]
  double v166; // [sp+78h] [bp-BCh]
  double v167; // [sp+80h] [bp-B4h]
  double v168; // [sp+88h] [bp-ACh]
  double v169; // [sp+90h] [bp-A4h]
  double *v171; // [sp+A0h] [bp-94h]
  char v172[128]; // [sp+ACh] [bp-88h] BYREF

  v171 = *(double **)(a1 + 84);
  v154 = v1;
  v2 = *(_DWORD *)v171;
  if ( dword_BF878 )
  {
    v3 = dbl_BF890;
    v4 = dbl_BF898;
    v161 = dbl_BF8D8;
    v165 = dbl_BF8B8;
    v152 = dbl_BF8B0;
    v156 = dbl_BF888;
    v163 = dbl_BF8C8;
    v5 = dbl_BF8A8;
    v162 = dbl_BF8D0;
    v6 = dbl_BF890 * -3.48174 + dbl_BF898 * 0.8360961 + dbl_BF888 * 5.452988 + dbl_BF880 * -3.807229;
    v164 = dbl_BF8C0;
    v159 = dbl_BF8E0;
    v7 = dbl_BF888 * 0.01654858;
    v166 = dbl_BF880;
    v8 = dbl_BF898 * 0.003281435;
    v9 = dbl_BF8A8 * -0.02375732;
    v10 = dbl_BF8D8 * -0.02375732;
    v11 = dbl_BF880 * -0.01149947;
    v12 = dbl_BF890 * -0.01149947;
    v167 = dbl_BF8B0 * 0.03353214;
    v169 = dbl_BF8D0 * 0.03353214;
    v13 = dbl_BF8B8 * -0.04080258;
    v168 = dbl_BF8C8 * -0.04080258;
    v14 = dbl_BF8C0 * 0.04605479;
    v15 = v154
        - (dbl_BF8D8 * -2.765914
         + dbl_BF8E0 * 0.4897278
         + dbl_BF8D0 * 8.110921
         + dbl_BF8C8 * -15.17732
         + dbl_BF8C0 * 19.75197
         + dbl_BF8B8 * -18.14365
         + dbl_BF8B0 * 11.59783
         + dbl_BF8A8 * -4.73504);
    v16 = dbl_BF8E0 * 0.008203628;
  }
  else
  {
    dword_BF878 = 1;
    memset(&unk_BF8F0, 0, 0x148u);
    memset(&unk_104490, 0, 0x2A80u);
    memset(&unk_101A10, 0, 0x2A80u);
    memset(dbl_F5210, 0, 0xC800u);
    memset(&unk_E8A10, 0, 0xC800u);
    memset(&unk_BFA38, 0, 0x140u);
    memset(&unk_BFB78, 0, 0x140u);
    memset(&unk_DC210, 0, 0xC800u);
    memset(&unk_CFA10, 0, 0xC800u);
    memset(&unk_BFCB8, 0, 0x140u);
    memset(&unk_BFDF8, 0, 0x140u);
    memset(dbl_C0010, 0, sizeof(dbl_C0010));
    v6 = 0.0;
    v10 = -0.0;
    v15 = v1;
    v169 = 0.0;
    v16 = 0.0;
    v14 = 0.0;
    v167 = 0.0;
    v5 = 0.0;
    v152 = 0.0;
    v165 = 0.0;
    v164 = 0.0;
    v163 = 0.0;
    v162 = 0.0;
    v161 = 0.0;
    v159 = 0.0;
    v8 = 0.0;
    v7 = 0.0;
    v166 = 0.0;
    v156 = 0.0;
    v3 = 0.0;
    v4 = 0.0;
    v168 = -0.0;
    v13 = -0.0;
    v9 = -0.0;
    v12 = -0.0;
    v11 = -0.0;
  }
  v17 = *(_DWORD *)(v2 + 2176);
  v18 = v154 * 5.0 - v6;
  dbl_BF8A0 = v4;
  dbl_BF890 = v156;
  dbl_BF880 = v18;
  dbl_BF898 = v3;
  v19 = dword_BFF38;
  dbl_BF888 = v166;
  *(_DWORD *)(v2 + 2176) = (v17 + 1) % 80;
  v20 = v19 + 1;
  v19 *= 8;
  dbl_BF8E8 = v159;
  dbl_BF8D8 = v162;
  dbl_BF8E0 = v161;
  v21 = v11 + v18 * 0.003281435 + v7 + v12 + v8;
  v22 = sintab[v17];
  dbl_BF8D0 = v163;
  dbl_BF8C8 = v164;
  v23 = *(double *)(v2 + 2160);
  v24 = v21 * v22 / 680.0;
  dbl_BF8C0 = v165;
  v25 = (double *)((char *)&unk_104490 + v19);
  v26 = *(double *)((char *)&unk_104490 + v19);
  v27 = (double *)((char *)&unk_101A10 + v19);
  v28 = dword_BFF3C;
  v29 = v9 + v15 * 0.008203628 + v167 + v13;
  v30 = v21 * sintab[(v17 + 20) % 80] / 680.0;
  dbl_BF8B8 = v152;
  *(double *)(v2 + 2160) = v23 - v26;
  dword_BFF38 = v20 % 1360;
  dbl_BF8B0 = v5;
  *v25 = v24;
  v31 = *(double *)(v2 + 2168);
  v32 = *(double *)(v2 + 2160) + v24;
  dbl_BF8A8 = v15;
  v33 = dbl_BFF68;
  *(double *)(v2 + 2160) = v32;
  v34 = v29 + v14 + v168 + v169 + v10 + v16;
  v35 = v31 - *v27;
  v36 = dbl_BFF60;
  *(double *)(v2 + 2168) = v35;
  *v27 = v30;
  v37 = dword_BFF40;
  v38 = dbl_BFF48;
  v160 = dword_BFF40;
  *(double *)(v2 + 2168) = *(double *)(v2 + 2168) + v30;
  v39 = v28 + 20;
  v157 = &sintab[v28];
  v40 = dbl_BFF58;
  v41 = v28 + 10;
  v42 = 8 * v37;
  v43 = (double *)((char *)&unk_E8A10 + 8 * v37);
  v44 = sintab[v39 % 80];
  v45 = *(_DWORD *)(v2 + 2196) + 1;
  v46 = v34 * *v157 * 0.25;
  v47 = v36 - *v43;
  dword_BFF3C = v41 % 80;
  v48 = v45 - (_DWORD)&loc_75300 * (v45 / 480000);
  v49 = v34 * v44 * 0.25;
  v50 = dbl_F5210[v37];
  v158 = dword_BFF50;
  v51 = 8 * dword_BFF50;
  *(_DWORD *)(v2 + 2196) = v48;
  LODWORD(v55) = 274877907 * v48;
  v52 = v47 + v49;
  *v43 = v49;
  v53 = v52 * v52;
  v54 = v38 - v50 + v46;
  HIDWORD(v55) = 8000;
  v56 = *(double *)((char *)&unk_BFB78 + v51);
  v57 = v48 % 8000;
  dbl_BFF60 = v52;
  v58 = *(double *)((char *)&unk_BF668 + v51 + 976);
  v59 = v53 + v54 * v54;
  *(double *)((char *)&unk_BFB78 + v51) = v49;
  dbl_F5210[v42 / 8u] = v46;
  *(double *)((char *)&unk_BF668 + v51 + 976) = v46;
  dbl_BFF48 = v54;
  dbl_BFF68 = v33 - v56 + v49;
  v60 = sqrt(v59);
  dbl_BFF58 = v40 - v58 + v46;
  v61 = *(_DWORD *)(v2 + 3292);
  if ( v59 < 0.0 )
    sqrt(v55);
  v153 = v2 + 4096;
  *(double *)(v2 + 216 * v61 + 2248) = v60 / 800.0;
  if ( (*(_DWORD *)(v2 + 4328) & 1) == 0 )
  {
    HIDWORD(v120) = v2 + 216 * v61 + 2208;
    LODWORD(v120) = a1;
    sub_55F80(v120, (int)(v171[93] * 8000.0));
    v160 = dword_BFF40;
    v158 = dword_BFF50;
    v42 = 8 * dword_BFF40;
    v51 = 8 * dword_BFF50;
  }
  HIDWORD(v66) = (char *)&unk_CFA10 + v42;
  v62 = dbl_BFF88 - *(double *)((char *)&unk_CFA10 + v42);
  v63 = (double *)((char *)&unk_DC210 + v42);
  v64 = (dword_BFF70 + 20) % 80;
  v65 = *v63;
  LODWORD(v66) = (dword_BFF70 + 12) % 80;
  v67 = v34 * sintab[dword_BFF70] * 0.25;
  dword_BFF70 = LODWORD(v66);
  v68 = (double *)((char *)&unk_BFCB8 + v51);
  v69 = sintab[v64];
  v70 = *(double *)((char *)&unk_BFCB8 + v51);
  v71 = (double *)((char *)&unk_BFDF8 + v51);
  v72 = *v71;
  v73 = dbl_BFF78 - v65 + v67;
  v74 = dbl_BFF80 - v70;
  *v68 = v67;
  dbl_BFF78 = v73;
  *v63 = v67;
  v75 = v34 * v69 * 0.25;
  v76 = *(_DWORD *)(v2 + 3292);
  v77 = v62 + v75;
  v78 = dbl_BFF90 - v72;
  *(double *)HIDWORD(v66) = v75;
  dbl_BFF80 = v74 + v67;
  dbl_BFF88 = v77;
  *v71 = v75;
  v79 = v77 * v77 + v73 * v73;
  dbl_BFF90 = v78 + v75;
  v80 = sqrt(v79);
  if ( v79 < 0.0 )
    sqrt(v66);
  v81 = 216 * v76;
  *(double *)(v2 + 216 * v76 + 2352) = v80 / 800.0;
  v82 = *(_DWORD *)(v2 + 4328);
  v83 = v82 & 1;
  if ( (v82 & 1) == 0 )
  {
    HIDWORD(v119) = v2 + v81 + 2312;
    LODWORD(v119) = a1;
    sub_55F80(v119, (int)(v171[94] * 8000.0));
    v82 = *(_DWORD *)(v2 + 4328);
    v83 = v82 & 1;
    v160 = dword_BFF40;
    v158 = dword_BFF50;
  }
  v84 = *(_DWORD *)(v2 + 2196);
  LODWORD(v85) = (v158 + 1) % 40;
  HIDWORD(v85) = &unk_BF668;
  dword_BFF40 = (v160 + 1) % 6400;
  dword_BFF50 = LODWORD(v85);
  if ( !v84 )
  {
    ++*(_DWORD *)(v2 + 56);
    if ( v83 )
    {
      if ( (v82 & 0x1000) != 0 )
        *(_DWORD *)(v2 + 2196) = 472000;
LABEL_15:
      v86 = **(_DWORD **)(a1 + 84);
      v87 = *(_DWORD *)(v86 + 3292);
      v88 = v86 + 216 * v87;
      HIDWORD(v85) = v88 + 2240;
      v89 = (double *)(v88 + 2256);
      v90 = *(double *)(HIDWORD(v85) + 8);
      if ( v90 > *v89 )
        *v89 = v90;
      v91 = v86 + 216 * v87;
      v92 = *(double *)(v91 + 2352);
      if ( v92 > *(double *)(v91 + 2360) )
        *(double *)(v91 + 2360) = v92;
      v93 = *(_DWORD *)(v86 + 2192);
      switch ( v93 )
      {
        case 6400:
          *(_DWORD *)(v86 + 2136) = *(_DWORD *)(v86 + 2132);
          break;
        case 120:
          dbl_BFF98 = *(double *)(v86 + 2160);
          dbl_BFFA0 = dbl_BFF98;
          dbl_BFFA8 = dbl_BFF98;
          break;
        case 1600:
          v136 = *(double *)(v86 + 2168);
          dbl_BFFA0 = *(double *)(v86 + 2160);
          v137 = v136 * v136 + dbl_BFFA0 * dbl_BFFA0;
          v138 = sqrt(v137);
          if ( v137 < 0.0 )
          {
            sqrt(v85);
            v136 = *(double *)(v86 + 2168);
            v93 = *(_DWORD *)(v86 + 2192);
          }
          v139 = (double)*(int *)(v86 + 2128);
          dbl_BFFB0 = v138;
          v140 = *(_DWORD *)(v86 + 2176);
          *(double *)(v86 + 2184) = v136 / v139;
          if ( v136 / v139 < 0.0 )
          {
            *(_DWORD *)(v86 + 2176) = v140 - 1;
            if ( v140 - 1 < 0 )
              *(_DWORD *)(v86 + 2176) = v140 + 79;
          }
          else
          {
            *(_DWORD *)(v86 + 2176) = v140 + 1;
            if ( v140 + 1 > 79 )
              *(_DWORD *)(v86 + 2176) = v140 - 79;
          }
          break;
        case 4000:
          dbl_BFF98 = *(double *)(v86 + 2160);
          break;
      }
      HIDWORD(v85) = *(_DWORD *)(v86 + 2196);
      *(_DWORD *)(v86 + 2192) = v93 + 1;
      LODWORD(v85) = 8000;
      if ( SHIDWORD(v85) % 8000 != *(_DWORD *)(v86 + 2136) )
        goto LABEL_23;
      v141 = *(double *)(v86 + 2160);
      v142 = *(double *)(v86 + 2168) * *(double *)(v86 + 2168);
      *(_DWORD *)(v86 + 4328) &= 0xFFFFFF9F;
      v143 = v142 + v141 * v141;
      v144 = sqrt(v143);
      if ( v143 < 0.0 )
        sqrt(v85);
      v145 = (double *)(v86 + 4320);
      HIDWORD(v146) = 0;
      v147 = dbl_BFFB0;
      *(double *)(v86 + 4312) = dbl_BFFB0;
      if ( v147 <= 0.0 )
      {
        *v145 = 0.0;
      }
      else if ( v144 <= 0.0 || (v146 = log10(0.0), v150 = v147 / v144 * 20.0, v150 > 40.0) )
      {
        *v145 = 40.0;
        if ( v147 >= 1000.0 )
        {
LABEL_150:
          LODWORD(v146) = a1;
          dbl_BFFA0 = dbl_BFFA0 - dbl_BFF98;
          dbl_BFF98 = dbl_BFF98 - dbl_BFFA8;
          sub_56264(v146);
          goto LABEL_129;
        }
      }
      else
      {
        *v145 = v150;
        if ( v147 >= 1000.0 && v150 >= 10.0 )
          goto LABEL_150;
      }
      LODWORD(v146) = a1;
      *(_DWORD *)(v86 + 4328) |= 0x20u;
      sub_56264(v146);
LABEL_129:
      v148 = *(_DWORD *)(v86 + 4340);
      if ( (*(_DWORD *)(v86 + 4328) & 0x60) != 0 )
        *(_DWORD *)(v86 + 4340) = ++v148;
      if ( v148 > 40 )
        *(_DWORD *)(v86 + 4332) |= 2u;
      sub_55584(*(int **)(a1 + 84));
      v85 = 0.0;
      v149 = v86 + 216 * *(_DWORD *)(v86 + 3292);
      *(_QWORD *)(v149 + 2256) = 0;
      *(_QWORD *)(v149 + 2360) = 0;
      *(_DWORD *)(v86 + 2192) = 0;
LABEL_23:
      v82 = *(_DWORD *)(v2 + 4328);
      goto LABEL_24;
    }
    LODWORD(v85) = sub_556C0(a1);
    v82 = *(_DWORD *)(v2 + 4328);
    if ( !LODWORD(v85) )
      *(_DWORD *)(v2 + 56) = 0;
    v83 = v82 & 1;
  }
  if ( v83 )
    goto LABEL_15;
  v112 = *(_DWORD *)(v2 + 3280);
  if ( v112 )
  {
    if ( *(double *)(v112 + 72) >= 50.0 )
    {
      LODWORD(v85) = *(_DWORD *)(v112 + 32);
      HIDWORD(v85) = (int)((unsigned __int64)(274877907LL * SLODWORD(v85)) >> 32) >> 9;
      if ( SLODWORD(v85) % 8000 == v57 )
      {
        v113 = (v82 & 2) == 0;
        v82 |= 1u;
        HIDWORD(v85) = (SLODWORD(v85) / -8000 + 60) % 60;
        v114 = v2 + 4096;
        *(_DWORD *)(v2 + 4304) = HIDWORD(v85);
        *(_DWORD *)(v2 + 2192) = 0;
        *(_DWORD *)(v2 + 4328) = v82;
        if ( !v113 )
          v114 = *(_DWORD *)(v2 + 2132);
        *(_DWORD *)(v2 + 56) = 0;
        if ( v113 )
        {
          *(_DWORD *)(v2 + 2132) = v57;
          *(_DWORD *)(v2 + 2136) = v57;
        }
        else
        {
          *(_DWORD *)(v2 + 2136) = v114;
        }
      }
    }
  }
LABEL_24:
  if ( (v82 & 0x100) != 0 )
  {
    v115 = dbl_BFF68;
    v116 = dbl_BFF58;
  }
  else
  {
    if ( (v82 & 0x200) == 0 )
    {
      v94 = 0.0;
      goto LABEL_27;
    }
    v115 = dbl_BFF90;
    v116 = dbl_BFF80;
  }
  v117 = v115 * v115 + v116 * v116;
  v118 = sqrt(v117);
  if ( v117 < 0.0 )
    sqrt(v85);
  v94 = v118 / 5.0;
LABEL_27:
  v95 = &dbl_C0010[v57];
  HIDWORD(v96) = &unk_BF668;
  LODWORD(v96) = &dbl_BFFB8;
  v97 = (v94 - *v95) / (double)*(int *)(v2 + 2128) + *v95;
  v98 = v97 <= dbl_BFFB8;
  *v95 = v97;
  if ( !v98 )
  {
    v99 = v57 - 48;
    if ( v57 - 48 < 0 )
      v99 = v57 + 7936;
    dbl_BFFB8 = v97;
    if ( v57 - 48 < 0 )
      v99 += 16;
    dword_BFFC0 = v57;
    dbl_BFFC8 = fabs(dbl_C0010[v99]);
  }
  if ( !v57 )
  {
    v100 = dbl_BFFB8;
    *(double *)(v2 + 2144) = dbl_BFFB8;
    if ( v100 <= 0.0 )
    {
      v101 = 0.0;
    }
    else if ( dbl_BFFC8 <= 0.0 || (v121 = v100 / dbl_BFFC8, log10(v96), v101 = v121 * 20.0, v101 > 40.0) )
    {
      v101 = 40.0;
    }
    *(double *)(v2 + 2152) = v101;
    v102 = dword_BFFC0 - 40;
    if ( dword_BFFC0 - 40 < 0 )
      v102 = dword_BFFC0 + 7960;
    dword_BFFC0 = v102;
    v103 = *(_BYTE **)(a1 + 84);
    v104 = *(_DWORD *)v103;
    v105 = (double *)(*(_DWORD *)v103 + 2144);
    v106 = *(_DWORD *)v103 + 4096;
    v107 = *v105;
    if ( !dword_BFFD0 )
    {
      dword_BFFD4 = 0;
      dword_BFFD8 = 0;
      dword_BFFDC = 0;
      dword_BFFD0 = 1;
    }
    v108 = dword_BFFE0 + 1;
    v109 = *(_DWORD *)(v106 + 232);
    ++dword_BFFE0;
    if ( v107 < 2500.0 || (v110 = *(double *)(v104 + 2152), v110 < 15.0) )
    {
      *(_DWORD *)(v106 + 232) = v109 & 0xFFFFFFED;
      dword_BFFE4 = 0;
      dword_BFFE8 = 0;
      dword_BFFEC = 0;
LABEL_44:
      LODWORD(v96) = 0;
      v111 = *(_DWORD *)(v153 + 232);
      if ( (v111 & 2) == 0 )
        *(_DWORD *)(v153 + 236) |= 8u;
      dbl_BFFB8 = 0.0;
      if ( (v111 & 1) == 0 )
        LODWORD(v96) = sub_55584(*(int **)(a1 + 84));
      return LODWORD(v96);
    }
    if ( (v109 & 0x300) == 0 )
      goto LABEL_44;
    v122 = dword_BFFD4;
    v123 = dword_BFFD8;
    dword_BFFD4 = v102;
    dword_BFFD8 = v122;
    dword_BFFDC = v123;
    if ( v122 < v102 )
    {
      if ( v123 >= v122 )
      {
        if ( v123 > v102 )
        {
LABEL_74:
          v122 = v102;
          dword_BFFF0 = v102;
          goto LABEL_75;
        }
        dword_BFFF0 = v123;
        v122 = v123;
LABEL_75:
        v155 = v103[768] & 8;
        v124 = 274877907LL * (v122 - dword_BFFF4);
        v125 = (v122 - dword_BFFF4) % 8000;
        if ( v125 )
        {
          if ( dword_BFFE4 <= dword_BFFE8 )
          {
            dword_BFFFC = v108;
            dword_BFFE4 = dword_BFFE8;
            dword_BFFE8 = 0;
            dword_C0000 = dword_BFFF4;
          }
        }
        else
        {
          v126 = dword_BFFE8 + 1;
          dword_BFFE8 = v126;
          if ( v126 > 10 )
          {
            if ( (v109 & 1) == 0 )
            {
              if ( !v155 )
              {
LABEL_83:
                v127 = *(_DWORD *)(v104 + 2128);
                goto LABEL_84;
              }
LABEL_152:
              HIDWORD(v124) = v172;
              sub_6C054(
                v172,
                128,
                "wwv1 %04x %3d %4d %5.0f %5.1f %5d %4d %4d %4d",
                v109,
                *(_DWORD *)(v104 + 2116),
                v122,
                v107,
                v110,
                v125,
                dword_BFFEC,
                v126,
                dword_BFFE4);
              sub_41F44(a1 + 16, v172);
              v122 = dword_BFFF0;
              goto LABEL_83;
            }
            if ( (v109 & 0x10) == 0 )
            {
              v127 = *(_DWORD *)(v104 + 2128);
              if ( v108 - dword_BFFF8 > v127 )
              {
LABEL_84:
                if ( ++dword_BFFEC >= v127 )
                {
                  v128 = dword_BFFE8;
                  v129 = dword_BFFE4;
                  if ( dword_BFFE8 >= dword_BFFE4 )
                  {
                    v129 = dword_BFFE8;
                    dword_BFFE4 = dword_BFFE8;
                    dword_BFFFC = dword_BFFE0;
                    dword_C0000 = dword_BFFF4;
                  }
                  v130 = *(_DWORD *)(v106 + 232);
                  v131 = &unk_BF668;
                  if ( !v129 )
                    v128 = dword_BFFE0;
                  dword_BFFF4 = v122;
                  if ( v129 )
                    v122 = dword_C0000;
                  else
                    HIDWORD(v124) = v128;
                  if ( v129 )
                    v131 = (_DWORD *)dword_BFFFC;
                  else
                    dword_BFFFC = v128;
                  v132 = v122 - dword_C0004;
                  if ( v129 )
                    HIDWORD(v124) = v131;
                  else
                    v131[614] = v122;
                  v133 = (double)(v132 % 8000);
                  if ( (v130 & 0x10) != 0 )
                  {
                    v134 = fabs(v133);
                    if ( v134 >= 12.0 )
                    {
                      if ( dword_C0008 < -2 )
                      {
                        if ( v127 > 8 )
                        {
                          dword_C0008 = 0;
                          *(_DWORD *)(v104 + 2128) = v127 >> 1;
                        }
                      }
                      else
                      {
                        --dword_C0008;
                      }
                    }
                    else
                    {
                      v135 = v133 * 0.5 / (double)(3 * (HIDWORD(v124) - dword_BFFF8)) + *(double *)(v104 + 24);
                      if ( v135 <= 1.5 )
                      {
                        if ( v135 < -1.5 )
                          v135 = -1.5;
                        *(double *)(v104 + 24) = v135;
                      }
                      else
                      {
                        *(double *)(v104 + 24) = 1.5;
                      }
                      if ( v134 < 6.0 )
                      {
                        if ( dword_C0008 > 2 )
                        {
                          if ( v127 < 1024 )
                          {
                            dword_C0008 = 0;
                            *(_DWORD *)(v104 + 2128) = 2 * v127;
                          }
                        }
                        else
                        {
                          ++dword_C0008;
                        }
                      }
                    }
                  }
                  if ( (v103[768] & 8) != 0 )
                  {
                    sub_6C054(
                      v172,
                      128,
                      "wwv2 %04x %5.0f %5.1f %5d %4d %4d %4d %4.0f %7.2f",
                      v130,
                      *v105,
                      *(double *)(v104 + 2152),
                      v122,
                      *(_DWORD *)(v104 + 2128),
                      v129,
                      HIDWORD(v124) - dword_BFFF8,
                      v133,
                      *(double *)(v104 + 24) * 1000000.0 / 8000.0);
                    sub_41F44(a1 + 16, v172);
                    v122 = dword_C0000;
                    v130 = *(_DWORD *)(v106 + 232);
                    HIDWORD(v124) = dword_BFFFC;
                  }
                  *(_DWORD *)(v106 + 232) = v130 | 0x10;
                  dword_C0004 = v122;
                  dword_BFFF8 = HIDWORD(v124);
                  dword_BFFE4 = 0;
                  dword_BFFE8 = 0;
                  dword_BFFEC = 0;
                }
                else
                {
                  dword_BFFF4 = v122;
                }
                goto LABEL_44;
              }
            }
            *(_DWORD *)(v106 + 232) = v109 | 2;
            *(_DWORD *)(v104 + 2132) = v122;
          }
        }
        if ( !v155 )
          goto LABEL_83;
        v109 = *(_DWORD *)(v106 + 232);
        if ( (v109 & 1) != 0 )
          goto LABEL_83;
        v126 = dword_BFFE8;
        goto LABEL_152;
      }
    }
    else if ( v123 <= v122 )
    {
      if ( v123 >= v102 )
      {
        v122 = v123;
        dword_BFFF0 = v123;
        goto LABEL_75;
      }
      goto LABEL_74;
    }
    dword_BFFF0 = v122;
    goto LABEL_75;
  }
  return LODWORD(v96);
}
